<?php
/** @var \Magento\Catalog\Block\Product\View $block */
$product = $block->getProduct();

/* TODO: sustituye por valores reales (o cálculalos de Magento_Review) */
$ratingValue  = 4.8;  // promedio 1..5
$reviewCount  = 12;   // nº de reseñas
$reviewAuthor = 'Carlos Soto';
$reviewTitle  = 'Excelente para uso comercial';
$reviewBody   = 'Muy buen producto, lo usamos en nuestro local y funciona perfecto.';
$reviewDate   = '2024-12-10';
?>
<!-- Microdata "invisible" para completar el Product -->
<span itemprop="aggregateRating" itemscope itemtype="https://schema.org/AggregateRating" style="display:none">
  <meta itemprop="ratingValue" content="<?= $ratingValue ?>" />
  <meta itemprop="reviewCount" content="<?= (int)$reviewCount ?>" />
</span>

<span itemprop="review" itemscope itemtype="https://schema.org/Review" style="display:none">
  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
    <meta itemprop="name" content="<?= $block->escapeHtmlAttr($reviewAuthor) ?>" />
  </span>
  <meta itemprop="datePublished" content="<?= $block->escapeHtmlAttr($reviewDate) ?>" />
  <meta itemprop="name" content="<?= $block->escapeHtmlAttr($reviewTitle) ?>" />
  <meta itemprop="reviewBody" content="<?= $block->escapeHtmlAttr($reviewBody) ?>" />
  <span itemprop="reviewRating" itemscope itemtype="https://schema.org/Rating">
    <meta itemprop="ratingValue" content="5" />
    <meta itemprop="bestRating" content="5" />
  </span>
</span>
